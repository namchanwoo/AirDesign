# 턴 시스템 상세 기획서

> **문서 버전**: v1.1
> **작성일**: 2025-01-07
> **최종 수정**: 2025-01-11
> **상태**: 작업 중
> **관련 문서**: 코어루프_기획서_초안.md (v0.7), 인텐트_시스템_상세기획서.md (v2.0), 카드_시스템_상세기획서.md (v2.0)

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| **v1.1** | 2025-01-11 | 카드 시스템 v2.0 연동 - 턴별 드로우/버리기 흐름 통합, 턴 처리 순서 재정의 |
| **v1.0** | 2025-01-07 | 초안 작성 - 하이브리드 턴 시스템 상세 정의 |

---

## 0. 기획 의도

> **핵심 경험**: "바라보다가 개입하기" - 리듬 기반 전략

### 0.1 하이브리드 턴 시스템 설계 철학

**왜 "글로벌 모래시계 + 개별 카운터" 구조인가?**

| 기존 시스템 | 문제점 | 본 시스템의 해결책 |
|------------|--------|-------------------|
| 전통적 턴제 | 내 턴까지 기다림 → 지루함 | 모래시계가 자동 진행 → 지속적 긴장감 |
| 완전 실시간 | 조작 스트레스 → 미드코어 부적합 | 자동 행동 기반 → 관찰 후 개입 |
| 라운드 기반 | 모든 유닛 동시 행동 → 단조로움 | 개별 턴 주기 → 리듬감 있는 전개 |

### 0.2 레이어드 타이밍 구조

```
[Layer 1] 글로벌 모래시계 ──── 모든 유닛이 공유하는 시간 기준
              │
              ▼
[Layer 2] 개별 턴 카운터 ───── 유닛마다 다른 행동 주기
              │
              ▼
[Layer 3] 스피드 스탯 ──────── 동시 발동 시 처리 순서
```

### 0.3 핵심 재미 요소

| 재미 요소 | 설명 | 심리적 근거 |
|-----------|------|-------------|
| **패턴 인식** | 카운터를 관찰하며 발동 타이밍 예측 | 학습과 숙달의 쾌감 |
| **긴장감 유지** | 흐르는 모래시계가 주는 시간 압박 | 결과 기대 시 도파민 분비 |
| **전략적 선택** | 인텐트 전환, 개입 시점 결정 | 의미 있는 선택의 만족감 |
| **통제감** | 카드/인텐트로 턴 흐름에 개입 | 몰입 경험 촉진 |

### 0.4 플레이 리듬

```
[관찰 페이즈]                    [개입 페이즈]
  모래시계 관찰       ───────>    카드 사용 결정
  카운터 추적                     인텐트 변경
  패턴 예측                       턴 조작 효과 적용
       │                               │
       └─────── 긴장 축적 ─────────────┘
                    │
              [보상 페이즈]
           예측 적중 시 성취감
           계획 실현 시 만족감
```

---

## 1. 턴 시스템 개요

### 1.1 핵심 구성 요소

| 요소 | 역할 | 표시 위치 |
|------|------|----------|
| **글로벌 모래시계** | 공용 시간 기준 (1턴 ≈ 3초) | 화면 상단 중앙 |
| **턴 카운터** | 개별 유닛의 행동까지 남은 턴 | 유닛 머리 위 |
| **스피드** | 동시 발동 시 처리 순서 | 유닛 상세 정보 |

### 1.2 기본 흐름

> ✅ **v1.1 확정** - 카드 시스템 v2.0 연동

**턴 처리 순서 (Turn N 시작 시):**

```
┌────────────────────────────────────────────────────────────┐
│                    턴 N 처리 흐름                            │
├────────────────────────────────────────────────────────────┤
│  1. 카드 버리기      │ 버리기 예약된 카드 → 묘지            │
│  2. 카드 드로우      │ 핸드 < 5장이면 1장 드로우            │
│  3. 카운터 감소      │ 모든 유닛 턴 카운터 -1               │
│  4. 인텐트 실행      │ 카운터=0 유닛 스피드 순 실행         │
│  5. 인텐트 완료      │ 발동 유닛 카운터 리셋                │
│  6. 턴 게이지 충전   │ 3초 대기 후 턴 N+1 시작              │
├────────────────────────────────────────────────────────────┤
│  ★ 카드 사용: 언제든 가능 (사용 중 일시정지)               │
└────────────────────────────────────────────────────────────┘
```

**상세 흐름도:**

```
[턴 N 시작]
     │
     ▼
① 카드 버리기 ─────── 이전 턴에 "버리기 예약"된 카드 묘지로 이동
     │
     ▼
② 카드 드로우 ─────── 핸드 < 5장이면 덱에서 1장 드로우
     │                 (핸드 = 5장이면 드로우 불가)
     ▼
③ 모든 유닛 턴 카운터 -1
     │
     ▼
④ 카운터 = 0인 유닛 인텐트 실행
     │
     ├── 단일 발동: 즉시 실행
     │
     └── 동시 발동: 스피드 순 처리
               │
               ▼
⑤ 인텐트 실행 완료 ── 발동한 유닛 카운터 = 최대 주기로 리셋
     │
     ▼
⑥ 턴 게이지 충전 시작 (3초)
     │
     ▼
[게이지 완료] ──────> [턴 N+1 시작] (반복)
```

**핵심 규칙:**
- **카드 사용**: 턴 게이지 충전 중 언제든 가능 (사용 시 일시정지)
- **버리기 예약**: 카드를 버리면 즉시 제거되지 않고 다음 턴 시작 시 처리
- **드로우 조건**: 핸드가 5장 미만일 때만 드로우 가능

### 1.3 용어 정의

| 용어 | 정의 |
|------|------|
| **턴 (Turn)** | 글로벌 모래시계가 뒤집어지는 단위 (약 3초) |
| **턴 주기 (Turn Cycle)** | 유닛이 행동하는 간격 (1~5턴) |
| **턴 카운터 (Turn Counter)** | 현재 남은 턴 수 (0이 되면 행동 발동) |
| **턴 게이지** | 다음 턴까지 남은 시간을 표시하는 UI 요소 (모래시계) |
| **글로벌 모래시계** | 화면 중앙의 공용 타이머 |
| **스피드 (Speed)** | 동시 발동 시 처리 순서를 결정하는 스탯 |
| **발동 (Trigger)** | 턴 카운터가 0이 되어 인텐트 행동이 실행되는 것 |
| **버리기 예약** | 카드를 버림 표시하면 즉시 제거되지 않고 다음 턴 시작 시 처리 |
| **핸드 (Hand)** | 플레이어가 보유 중인 사용 가능한 카드 (최대 5장) |

---

## 2. 글로벌 모래시계 상세

### 2.1 기본 동작

| 항목 | 값 | 비고 |
|------|---|------|
| **1턴 시간** | 3초 | 기본값 |
| **조정 범위** | 2.5초 ~ 4초 | 설정에서 조절 가능 |
| **뒤집힘 주기** | 3초마다 | 자동 진행 |

**동작 순서:**
1. 모래시계 상단에서 모래가 떨어짐 (3초간)
2. 모래가 다 떨어지면 뒤집힘 연출
3. 모든 유닛 턴 카운터 -1
4. 다시 모래 떨어지기 시작

### 2.2 시각적 디자인

```
┌─────────────────────────────────────────────────────┐
│                    화면 상단                          │
│                                                      │
│                   ┌─────────┐                        │
│                   │   ⏳    │ ← 모래시계 (중앙)      │
│                   │ TURN 5  │ ← 현재 턴 번호         │
│                   └─────────┘                        │
│                                                      │
│     [적 그리드]              [아군 그리드]           │
└─────────────────────────────────────────────────────┘
```

**모래시계 상태 표현:**

| 상태 | 시각적 표현 | 사운드 |
|------|------------|--------|
| 진행 중 | 모래 떨어지는 애니메이션 | 잔잔한 틱 사운드 |
| 턴 종료 (뒤집힘) | 플래시 효과 + 뒤집힘 | "퉁" 효과음 |
| 일시정지 | 흑백/반투명 + ⏸️ 아이콘 | 없음 |
| 가속 모드 (1.5x/2x) | 속도 배율 숫자 표시 | 빠른 틱 사운드 |

### 2.3 일시정지 규칙

> ✅ **확정됨**

| 상황 | 모래시계 상태 | 설명 |
|------|:------------:|------|
| **카드 사용 중** | ⏸️ 정지 | 카드 효과 확인 시간 확보 |
| **메뉴/설정 열 때** | ⏸️ 정지 | 플레이어 조작 보장 |
| **컷신/이벤트 중** | ⏸️ 정지 | 스토리 몰입 |
| **인텐트 전환 중** | ▶️ 진행 | 전환은 즉시 처리 |
| **유닛 정보 확인** | ▶️ 진행 | 정보 확인은 전략의 일부 |

### 2.4 게임 속도 옵션

| 속도 | 1턴 시간 | 대상 유저 |
|:----:|:-------:|----------|
| **1x** | 3초 | 초보자, 신중한 플레이 |
| **1.5x** | 2초 | 일반 플레이 |
| **2x** | 1.5초 | 숙련자, 반복 플레이 |

**UI 위치**: 화면 우상단 속도 조절 버튼

---

## 3. 턴 카운터 상세

### 3.1 기본 동작

**카운트다운 메커니즘:**

```
[전투 시작]
     │
     ▼
카운터 = 최대 주기 (예: 3턴 주기 → [3])
     │
     ├── 모래시계 뒤집힘 → 카운터 -1 → [2]
     ├── 모래시계 뒤집힘 → 카운터 -1 → [1]
     └── 모래시계 뒤집힘 → 카운터 -1 → [0] 발동!
                                          │
                                          ▼
                                  카운터 = 최대 주기 [3]
                                      (반복)
```

### 3.2 표시 방식

**유닛 위 표시:**

```
    ┌──────────┐
    │ 전사 A   │
    │  ⚔️     │ ← 인텐트 아이콘
    │  [2]    │ ← 턴 카운터
    │ HP████░ │
    └──────────┘
```

**색상 코드:**

| 카운터 값 | 색상 | 의미 | 효과 |
|:--------:|------|------|------|
| 3+ | 흰색/파랑 | 여유 | 없음 |
| 2 | 노랑 | 주의 | 약한 펄스 |
| 1 | 빨강 | 임박 | 깜빡임 |
| 0 (발동!) | 금색 | 행동 중 | 플래시 + 확대 |

**발동 시 연출:**
1. 카운터 [1] → [0]
2. "발동!" 텍스트 팝업
3. 유닛 테두리 금색 발광
4. 인텐트 아이콘 확대 (0.3초)
5. 행동 애니메이션 재생

### 3.3 주기 범위

> ✅ **확정됨**

| 주기 | 특성 | 적합한 역할 |
|:----:|------|-------------|
| **1턴** | 매우 빠름 | 약한 연속 공격, 미니 버프 |
| **2턴** | 빠름 | 기본 공격, 일반 스킬 |
| **3턴** | 보통 | 표준 스킬 (기준값) |
| **4턴** | 느림 | 강력한 단발 스킬 |
| **5턴** | 매우 느림 | 궁극기급 효과 |

**특수 케이스:**
- **보스 전용**: 최대 10턴 주기 (강력한 페이즈 공격)
- **최소 제한**: 1턴 (가속으로 0 이하 불가)
- **최대 제한**: 7턴 (둔화로 8 이상 불가, 보스 제외)

### 3.4 주기 변경 효과

| 효과 | 설명 | 예시 |
|------|------|------|
| **가속 (Haste)** | 턴 주기 감소 | 3턴 → 2턴 |
| **둔화 (Slow)** | 턴 주기 증가 | 3턴 → 4턴 |

**중첩 규칙:**
- 가속 + 둔화 = 상쇄
- 동일 효과 중첩 = **불가** (최신 효과로 갱신)
- 최소 주기 = 1턴, 최대 주기 = 7턴 (보스 제외)

---

## 4. 스피드 스탯 상세

### 4.1 역할

**동시 발동 시 처리 순서 결정:**

```
[상황] 같은 턴에 3명의 인텐트 발동

전사 A (스피드: 50)  - 분노의 일격
힐러 B (스피드: 70)  - 치유의 손길
적 오크 (스피드: 60) - 광역 강타

처리 순서:
1. 힐러 B (스피드 70) → 아군 치유
2. 적 오크 (스피드 60) → 광역 공격
3. 전사 A (스피드 50) → 단일 공격
```

### 4.2 기본값 가이드라인

> ✅ **확정됨** - 범위: 1~100

| 역할 | 스피드 범위 | 설계 의도 |
|------|:----------:|-----------|
| **암살자/특수** | 80~100 | 선제 타격 특화 |
| **힐러** | 70~90 | 피해 입기 전 선힐 |
| **서포터** | 60~80 | 버프를 먼저 적용 |
| **딜러** | 50~70 | 평균 속도 |
| **탱커** | 30~50 | 느리지만 든든함 |

### 4.3 동률 처리 규칙

> ✅ **확정됨**

| 우선순위 | 기준 |
|:--------:|------|
| 1순위 | **스피드 수치** 높은 순 |
| 2순위 | 아군 우선 (플레이어 유리) |
| 3순위 | UI 슬롯 순서 (왼쪽부터) |

### 4.4 스피드 변경 효과

| 효과 | 설명 | 전략적 활용 |
|------|------|-------------|
| **스피드 증가** | 동시 발동 시 먼저 행동 | 힐러 선힐, 선제 처치 |
| **스피드 감소** | 동시 발동 시 나중에 행동 | 적 딜러 지연 |

**예시 시나리오:**
```
아군 힐러 (스피드 50) vs 적 딜러 (스피드 60) 동시 발동

기본: 적 딜러 먼저 → 아군 피해 → 힐러 회복 (피해 발생)

스피드 버프(+20) 사용 시:
아군 힐러 (스피드 70) → 먼저 힐 → 적 딜러 공격 (피해 감소)
```

---

## 5. 턴 조작 효과 분류

### 5.1 턴 주기 조작

| 효과 | 설명 | 권장 코스트 |
|------|------|:-----------:|
| **가속 (Haste)** | 턴 주기 -1 (지속) | 2~3 |
| **둔화 (Slow)** | 턴 주기 +1 (지속) | 1~2 |

**가속 상세:**

| 분석 항목 | 내용 |
|-----------|------|
| 아군 적용 | DPS 증가, 힐 빈도 증가 |
| 적 적용 | 적 패턴 빠르게 소모 (역이용 가능) |
| 제한사항 | 턴 주기 1인 유닛에게는 효과 없음 |
| 시너지 | 강력한 단발 효과 유닛과 조합 시 극대화 |

**둔화 상세:**

| 분석 항목 | 내용 |
|-----------|------|
| 아군 적용 | 희생 기반 전략, 동시 발동 유도 |
| 적 적용 | 보스 강력한 패턴 지연 |
| 제한사항 | 최대 턴 주기 7 (무한 지연 방지) |
| 시너지 | DoT(지속 피해) 효과와 조합 |

### 5.2 카운터 조작

| 효과 | 설명 | 권장 코스트 |
|------|------|:-----------:|
| **즉시 발동 (Trigger)** | 카운터 즉시 0으로 | 3~4 |
| **카운터 리셋 (Reset)** | 최대 주기로 되돌림 | 2~3 |
| **카운터 감소 (Quicken)** | 카운터 -N | 1~2 |
| **카운터 증가 (Delay)** | 카운터 +N (최대치 초과 불가) | 1~2 |

**즉시 발동 상세:**

| 분석 항목 | 내용 |
|-----------|------|
| 전략적 가치 | 매우 높음 - 템포의 급격한 변화 |
| 아군 적용 | 긴급 힐, 버프 타이밍 최적화, 콤보 완성 |
| 적 적용 | 적의 약한 인텐트 강제 발동 (강한 인텐트 지연) |
| 리스크 | 발동 후 카운터가 최대치로 리셋 (공백 발생) |
| 제한 제안 | 유닛당 라운드 1회 제한 검토 |

### 5.3 행동 무력화

> ✅ **확정됨** - 스턴 = 카운터도 정지

| 효과 | 카운터 진행 | 행동 가능 | 인텐트 표시 |
|------|:----------:|:--------:|:-----------:|
| **스턴 (Stun)** | ❌ 정지 | ❌ 불가 | ✅ 유지 |
| **빙결 (Freeze)** | ❌ 정지 | ❌ 불가 | ✅ 유지 |
| **침묵 (Silence)** | ✅ 진행 | ⚠️ 일부 불가 | ✅ 유지 |
| **속박 (Root)** | ✅ 진행 | ✅ 가능 | ✅ 유지 |

**스턴 상세:**

| 항목 | 규칙 |
|------|------|
| 카운터 | 모래시계가 뒤집혀도 감소하지 않음 |
| 지속 시간 | 턴 단위 (예: 2턴 스턴) |
| 해제 시 | 남은 카운터부터 재개 |
| 보스 적용 | 지속시간 50% 감소 or 면역 |

**스턴 코스트 가이드:**

| 스턴 지속 | 권장 코스트 |
|:--------:|:-----------:|
| 1턴 | 2~3 |
| 2턴 | 4~5 |
| 3턴+ | 6+ (희귀/전설급) |

### 5.4 스피드 조작

| 효과 | 설명 | 권장 코스트 |
|------|------|:-----------:|
| **스피드 증가** | +N 스피드 | 1~2 |
| **스피드 감소** | -N 스피드 | 1~2 |
| **스피드 고정** | 스피드 변경 불가 | 2 |

### 5.5 효과 간 상호작용

| 효과 조합 | 결과 | 전략적 활용 |
|-----------|------|-------------|
| 가속 + 즉시 발동 | 빠른 유닛이 더 자주 행동 | 딜러 극대화 빌드 |
| 둔화 + 스턴 | 적 유닛 완전 무력화 | 보스 패턴 스킵 |
| 스피드 버프 + 즉시 발동 | 동시 발동 시 선제 행동 보장 | 힐러 보호 |
| 가속 + 둔화 (동일 대상) | 효과 상쇄 | 적 버프 해제 대용 |

---

## 6. 시스템 상호작용

### 6.1 인텐트 전환과 턴 카운터

> ⚠️ **상세 내용**: 인텐트_시스템_상세기획서.md 4.2절 참조

| 항목 | 규칙 |
|------|------|
| **전환 방식** | 즉시 전환 |
| **카운터 처리** | 새 인텐트의 최대 주기로 리셋 |
| **모래시계** | 계속 진행 (정지하지 않음) |
| **이전 인텐트** | 남은 카운터 무관하게 즉시 취소 |

**전환 흐름:**
```
현재 인텐트: "분노의 일격" (3턴), 카운터 [1]
                    │
                    ▼
             플레이어: 전환!
                    │
                    ▼
새 인텐트: "광폭화" (2턴), 카운터 [2] (리셋)
```

### 6.2 카드 시스템 연동

> ✅ **v1.1 확정** - 카드_시스템_상세기획서.md (v2.0) 참조

#### 6.2.1 턴별 카드 드로우/버리기

| 시점 | 처리 내용 |
|------|----------|
| **턴 시작 직후** | 버리기 예약된 카드 → 묘지로 이동 |
| **버리기 처리 후** | 핸드 < 5장이면 덱에서 1장 드로우 |
| **핸드 5장 시** | 드로우 불가 (핸드 관리 필요) |

**버리기 예약 시스템:**
- 카드를 버리면 즉시 사라지지 않고 "버리기 예약" 상태
- 다음 턴 시작 시 묘지로 이동
- 버리기 예약 카드는 사용 불가

#### 6.2.2 카드 사용과 시간 정지

> ✅ **핵심**: 카드는 언제든 사용 가능 (턴 게이지 충전 중에도)

| 시점 | 모래시계 | 턴 카운터 |
|------|:-------:|:--------:|
| 카드 사용 전 | ▶️ 진행 | ▶️ 진행 |
| 카드 사용 중 | ⏸️ 정지 | ⏸️ 정지 |
| 카드 사용 완료 | ▶️ 재개 | ▶️ 재개 |

**카드 효과 중 턴 조작:**
- 가속/둔화: 효과 적용 후 다음 턴부터 반영
- 즉시 발동: 카드 효과 종료 후 즉시 해당 유닛 발동
- 스턴: 효과 적용 즉시 해당 유닛 정지

#### 6.2.3 카드-턴 타이밍 다이어그램

```
[턴 N-1 게이지 충전 중]
     │
     │ ◀─── 카드 사용 가능 (언제든)
     │       └─ 사용 시 게이지 일시정지
     ▼
[턴 N 시작]
     │
     ├─ 1. 버리기 예약 카드 처리
     ├─ 2. 1장 드로우 (핸드 < 5)
     ├─ 3. 카운터 감소 & 인텐트 실행
     │
     │ ◀─── 인텐트 실행 중에도 카드 사용 가능
     │       (사용 시 실행 일시정지)
     ▼
[턴 N 게이지 충전 시작]
     │
     │ ◀─── 카드 사용 가능 (언제든)
     ▼
[턴 N+1 시작]
```

### 6.3 버프/디버프 지속 시간

**지속 시간 규칙:**
- 모든 지속 효과는 **턴 단위**
- 턴 종료 시 (모래시계 뒤집힘 시) 지속 시간 -1
- 0이 되면 효과 해제

**예시:**
```
[턴 5] "가속" 버프 적용 (3턴 지속)
[턴 6] 지속 시간 2
[턴 7] 지속 시간 1
[턴 8] 지속 시간 0 → 효과 해제
```

---

## 7. 전투 페이즈별 규칙

### 7.1 전투 시작

> ✅ **v1.1 업데이트** - 카드 시스템 연동 추가

| 항목 | 규칙 |
|------|------|
| **모든 유닛 카운터** | 각자 최대 주기로 시작 |
| **모래시계** | 턴 0에서 시작 (첫 턴 시작 전 준비 시간) |
| **적용 대상** | 아군 + 적군 동일 |
| **카드 핸드** | 이전 전투 핸드 유지 (런 중 지속) |
| **첫 턴 드로우** | 턴 1 시작 시 일반 드로우 규칙 적용 |

**전투 시작 흐름:**
```
[전투 진입]
     │
     ▼
턴 0 (준비) ─────── 유닛 배치, 인텐트 확인
     │
     ▼
턴 1 시작 ─────── 버리기 처리 → 드로우 → 카운터 감소 → ...
     │
     ▼
정상 전투 진행
```

**예시:**
```
전투 시작

[유닛 상태]
전사 A (3턴 주기) → 카운터 [3]
힐러 B (2턴 주기) → 카운터 [2]
적 오크 (4턴 주기) → 카운터 [4]

[카드 상태]
핸드: 이전 전투에서 보유 중이던 카드 유지
덱: 파티 공유 덱 (최대 40장)
```

### 7.2 전투 중

- 정상 진행
- 카드 사용 시 일시정지
- 인텐트 전환 가능

### 7.3 웨이브 전환 (해당 시)

| 유닛 유형 | 카운터 처리 |
|----------|-------------|
| **생존 유닛** | 카운터 유지 |
| **신규 유닛** | 최대 주기로 시작 |

### 7.4 전투 종료

- 모든 턴 상태 초기화
- 버프/디버프 해제
- 다음 전투는 새로운 상태로 시작

---

## 8. UI/UX 상세

### 8.1 모래시계 UI

```
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                        ┌─────────────┐                        │
│                        │     ⏳      │                        │
│                        │   TURN 5   │                        │
│                        │    [1x]    │ ← 속도 표시             │
│                        └─────────────┘                        │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

**모래시계 크기**: 화면 폭의 5~8%
**위치**: 화면 상단 중앙
**터치/클릭**: 속도 조절 팝업 표시

### 8.2 턴 카운터 UI

**일반 상태:**
```
┌────────┐
│ 전사 A │
│  ⚔️    │
│  [3]   │ ← 흰색/파랑
│ HP████ │
└────────┘
```

**발동 임박 (카운터 1):**
```
┌────────┐
│ 전사 A │
│  ⚔️    │
│  [1]   │ ← 빨강 + 깜빡임
│ HP████ │
└────────┘
```

**발동 중 (카운터 0):**
```
╔════════╗
║ 전사 A ║ ← 금색 테두리
║  ⚔️    ║ ← 확대된 아이콘
║ 발동!  ║ ← 금색 텍스트
║ HP████ ║
╚════════╝
```

### 8.3 동시 발동 순서 표시

같은 턴에 여러 유닛 발동 시:

```
┌─────────────────────────────────────────────────────────────┐
│                  이번 턴 행동 순서                            │
├─────────────────────────────────────────────────────────────┤
│  1. 힐러B (70) → 2. 적오크 (60) → 3. 전사A (50)             │
└─────────────────────────────────────────────────────────────┘
```

**시각적 처리:**
- 순서대로 0.3초 딜레이를 두고 행동
- 현재 행동 중인 유닛 강조
- 대기 중인 유닛은 반투명

### 8.4 위협 경고 시스템

**적 인텐트 발동 임박 (카운터 1) 시:**

```
┌────────┐
│ 오크   │
│  💀    │ ← 위험 인텐트 아이콘
│ [1] ⚠️ │ ← 경고 표시
│ HP████ │
└────────┘
   ↓
빨강 테두리
```

**경고 등급:**

| 위협도 | 시각적 표현 | 기준 |
|:------:|------------|------|
| 높음 | 빨강 테두리 + ⚠️ | 광역/고데미지 + [1] |
| 중간 | 노랑 테두리 | 일반 공격 + [1] |
| 낮음 | 없음 | [2] 이상 |

### 8.5 턴 조작 효과 표시

**버프/디버프 아이콘:**

| 효과 | 아이콘 | 색상 |
|------|:------:|------|
| 가속 | ⏩ | 초록 |
| 둔화 | ⏪ | 주황 |
| 스턴 | 💫 | 회색 |
| 스피드+ | ⚡ | 파랑 |
| 스피드- | 🐢 | 갈색 |

**턴 주기 변경 표시:**
```
원래 주기: 3턴 → 현재 주기: 2턴 (가속)

표시: [2] ⏩
```

---

## 9. 밸런스 가이드라인

### 9.1 턴 주기별 효과 강도

| 턴 주기 | 효과 배율 | 역할 예시 |
|:-------:|:---------:|-----------|
| 1턴 | ×0.5~0.6 | 약한 연속 공격, 미니 버프 |
| 2턴 | ×0.8~0.9 | 기본 공격, 일반 스킬 |
| 3턴 | ×1.0 | 표준 (기준값) |
| 4턴 | ×1.2~1.3 | 강력한 단발 스킬 |
| 5턴 | ×1.5~1.6 | 궁극기급 효과 |

**공식:**
```
효과 강도 = 기준값 × (턴 주기 / 3) × 역할 계수

역할 계수:
- 딜러: 1.0
- 힐러: 0.9
- 탱커: 0.8
- 서포터: 0.7
```

### 9.2 턴 조작 효과 코스트 가이드

| 효과 | 기본 코스트 | 범위 보정 |
|------|:----------:|:---------:|
| 가속 (-1턴) | 2 | +1 (범위), +2 (전체) |
| 둔화 (+1턴) | 1 | +1 (범위), +2 (전체) |
| 즉시 발동 | 3 | +1 (범위) |
| 스턴 (1턴) | 2 | +1 (범위), +2 (전체) |
| 스턴 (2턴) | 4 | +1 (범위), +3 (전체) |
| 스피드 ±20 | 1 | +0.5 (범위) |

### 9.3 예외 처리 목록

| 상황 | 처리 규칙 |
|------|----------|
| 스턴 중 유닛에게 즉시 발동 | 스턴 해제 후 즉시 발동 |
| 가속으로 턴 주기 0 이하 | 최소값 1 적용 |
| 스피드 동점 | 아군 우선 → UI 순서 |
| 모래시계 뒤집힘과 동시 카드 사용 | 카드 효과 먼저 → 턴 경과 |
| 인텐트 전환 중 스턴 | 전환 완료 후 스턴 적용 |

---

## 10. 확장 가능성

### 10.1 전장 효과와 턴 시스템

> ⚠️ **[추후 검토]**

**개념:**
- 런마다 등장하는 전장 특수 효과
- 턴 시스템에 영향을 주는 전장 규칙

**예시:**
```
"시간의 폭풍"
- 모래시계 주기가 무작위로 변동 (2~4초)
- 모든 스피드 버프/디버프 효과 2배
```

### 10.2 특수 보스 메커니즘

> ⚠️ **[추후 검토]**

**보스 전용 턴 규칙:**
- 페이즈별 턴 주기 변경
- 분노 상태: 턴 주기 감소
- 스턴/둔화 저항 or 면역

---

## 부록 A: 용어 정리

> ✅ **v1.1 업데이트** - 카드 시스템 용어 추가

### 턴 시스템 용어

| 용어 | 정의 |
|------|------|
| **턴 (Turn)** | 글로벌 모래시계가 뒤집어지는 단위 (약 3초) |
| **턴 주기 (Turn Cycle)** | 유닛이 행동하는 간격 (1~5턴) |
| **턴 카운터 (Turn Counter)** | 현재 남은 턴 수 (0이 되면 행동 발동) |
| **턴 게이지** | 다음 턴까지 남은 시간을 표시하는 UI 요소 |
| **글로벌 모래시계** | 화면 중앙의 공용 타이머 |
| **스피드 (Speed)** | 동시 발동 시 처리 순서를 결정하는 스탯 (1~100) |
| **발동 (Trigger)** | 턴 카운터가 0이 되어 인텐트 행동이 실행되는 것 |
| **가속 (Haste)** | 턴 주기를 감소시키는 효과 |
| **둔화 (Slow)** | 턴 주기를 증가시키는 효과 |
| **즉시 발동** | 턴 카운터를 즉시 0으로 만드는 효과 |
| **스턴 (Stun)** | 카운터 진행 + 행동을 모두 정지시키는 효과 |

### 카드 시스템 용어 (턴 시스템 연동)

| 용어 | 정의 |
|------|------|
| **핸드 (Hand)** | 플레이어가 보유 중인 사용 가능한 카드 (최대 5장) |
| **버리기 예약** | 카드를 버림 표시하면 즉시 제거되지 않고 다음 턴 시작 시 처리 |
| **턴별 드로우** | 매 턴 시작 시 핸드가 5장 미만이면 1장 드로우 |
| **파티 공유 덱** | 모든 파티원이 공유하는 단일 덱 (최대 40장) |

---

## 부록 B: 복합 상황 예시 시나리오

### 시나리오: 동시 발동 + 스피드 조작

**상황 설정:**
```
[턴 15 시작]
글로벌 모래시계: ⏳ 턴 15

아군:
- 전사 A: "분노의 일격"(3턴), 카운터 [1], 스피드 35
- 힐러 B: "치유의 손길"(2턴), 카운터 [1], 스피드 45

적:
- 오크 대장: "광역 강타"(4턴), 카운터 [1], 스피드 40
```

**기본 진행 (개입 없음):**
```
[턴 15] 모래시계 뒤집힘 → 모든 카운터 -1

동시 발동! 스피드 순:
1. 힐러 B (45) → 아군 HP 회복
2. 오크 대장 (40) → 광역 강타! (아군 전체 피해)
3. 전사 A (35) → 단일 공격

결과: 아군이 광역 피해를 입은 후 힐러가 회복
```

**플레이어 개입 (스피드 버프 사용):**
```
[턴 14] 플레이어: 카드 "광속" (스피드 +20) → 전사 A에게 사용

[턴 15] 동시 발동! 스피드 순:
1. 전사 A (55) → 오크 대장 공격 (처치!)
2. 힐러 B (45) → 아군 HP 회복
3. 오크 대장 (처치됨) → 행동 취소!

결과: 전사의 선제 공격으로 오크 처치, 광역 강타 발동 안 됨!
```

**핵심 전략:**
- 스피드 버프 1장으로 전투 결과가 완전히 달라짐
- 동시 발동 상황에서 순서 조작의 중요성

---

## 부록 C: 데이터 테이블 스키마

### C.1 턴 설정 테이블

```
DT_TurnSettings
├── GlobalHourglassDuration (float, 초) = 3.0
├── MinTurnCycle (int32) = 1
├── MaxTurnCycle (int32) = 7
├── BossMaxTurnCycle (int32) = 10
├── MinSpeed (int32) = 1
├── MaxSpeed (int32) = 100
└── SpeedTieBreaker (ESpeedTieBreaker: AllyFirst / EnemyFirst / UIOrder)
```

### C.2 턴 효과 테이블

```
DT_TurnEffect
├── EffectID (FName)
├── EffectType (ETurnEffectType)
│   ├── Haste (가속)
│   ├── Slow (둔화)
│   ├── ImmediateTrigger (즉시 발동)
│   ├── CounterReset (카운터 리셋)
│   ├── Stun (스턴)
│   ├── Freeze (빙결)
│   ├── SpeedBuff (스피드 증가)
│   └── SpeedDebuff (스피드 감소)
├── Value (int32) - 효과 수치
├── Duration (int32) - 지속 턴 수
├── TargetType (ETargetType)
└── StackingRule (EStackingRule: Replace / Stack / Ignore)
```

### C.3 유닛 턴 데이터

```
DT_UnitTurnData
├── UnitID (FName)
├── BaseTurnCycle (int32) = 3
├── BaseSpeed (int32) = 50
├── StunResistance (float, %) = 0.0
├── SlowResistance (float, %) = 0.0
└── IsBoss (bool) = false
```

---

*문서 끝*